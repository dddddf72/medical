## 甲旁软件说明文档

### 文件说明

项目文件位于 D:\\Parathyroid 中

更新项目时需要替换Main.exe 和 Config\config.ini 

新版本可以不删除 Config\modify.ini 文件

### 进入后门方式

所有界面的 激光接通状态 指示图标处 连续点击5下，即可打开后门配置

### 软件更新

选择 parathyroid.exe 所在文件夹（选择的是文件夹，文件夹名必须是parathyroid）文件所在路径不得含有中文和空格，旧版本所在路径也不得含有中文和空格。不得修改 parathyroid.exe 文件名

### 激光器控制

实时生效

### 按键说明

按键是模拟实际按键，根据流程设计，处于预热界面和自检界面时，按键将锁定无法点击

需要在基准值和检测界面才生效

按键非锁定状态时长按模式键（3秒）将进入取基准值的补值界面，在补值界面长按模式键可打开检测界面

### 采集卡数据说明

数据单位：V

采集卡数据：最终值

原始x：原始数据的平均值

偏置y: 偏置电压，在预热阶段将多次取值，去除不合理的值后求均值作为偏置电压。相关参数可在【界面配置 -> 预热】中配置

x-y: 原始数据的平均值 - 偏置电压

最终值的算法：final = abs|(originalAvg - offset) * ratio + compensate|

### 配置项说明

自动保存，部分配置项设置后立即生效，绝大部分需要重启应用生效

#### 基础配置

##### 采集数据的系数

实时生效

将在数据采集卡得到的数据基础上乘以该系数

可通过后门配置界面的 数据采集卡数据 观察修改的影响

##### 采集数据的补偿，范围： [-100，]

实时生效

将在数据采集卡得到的数据基础上加上该补偿

可通过后门配置界面的 数据采集卡数据 观察修改的影响

补偿后的值将取绝对值

#### 预热

##### 预热时长，单位: 分钟， 范围： [0, 30]

##### 激光功率

实时生效，单位：mw，范围：[10, 500]

##### 激光功率损耗补偿

实际设置的激光功率 = 激光功率 + 激光功率损耗补偿

单位：mw，范围：[-50, 50]

##### 激光功率最小值 与 激光功率最大值，范围：[0, 600]

在预热时将检查功率稳定情况，测量功率值不在此范围内说明功率不符合要求 将预热失败

因为固件原因，获取功率波动较大，激光器自检时将获取电压换算功率，此举误差较大

综上，功率范围设置为预期功率的正负15比较合适

##### 检查间隔时间，单位：秒

每次检查功率稳定性的间隔时间

#### 偏置电压

##### 偏置取值次数，范围：[0, 100]

偏置电压取值次数。偏置电压的取值是在预热阶段，所以取值间隔 = 预热时长 / 偏置电压取值次数

当偏置取值次数设为0时，偏置电压固定为0

##### 偏置电压有效范围（偏置最小值，偏置最大值），单位：V，范围：[-1, 1]

超过此范围采集的偏置电压将被舍弃，最后以有效偏置电压的均值作为实际偏置电压

建议配置范围：[-0.1, 0.1] 以内

系统判定apd正常的范围：[-0.3, 0.5]，不在本范围内，apd将被判定为异常。此范围与偏置电压有效范围无关

#### 自检

##### 荧光值的最大差值

在自检时将检测仿体荧光值和设置值差距 若差值在 **荧光值的最大差值** 范围内将通过快速自检

快速自检通过将不会进行模块自检（但会有模块自检的界面进度）

希望进行模块自检可以将本值设小进行测试

#### 基准值

##### 最小基准值 最大基准值，范围：[0, 100]

测量的基准值在此范围内才是有效基准值，否则无法测量下一个值

##### 取值次数 不得修改！！！

#### 测量值

##### 短按报警时长 单位：秒，范围: [1, 100] 

只影响短按时的报警，不影响长按时的报警。长按的报警时长为1秒

##### 通过基准值得到阈值的倍数

影响绿色格数

测量值大于基准值和该值的乘积时，将发出警报

### 出现红色时的基准值倍数

影响黄色格数

##### 进度条显示的基准值最大倍数

会影响绿黄红区块的占比

该值的意思是整个进度条表示的值 = 基准值 * **进度条显示的基准值最大倍数**

超过进度条能表示的值，按最大值表示

#### 长按读值触发时长 实时生效 单位：秒，范围：[0.5, ]

决定启动扫描模式所需的长按时间，该时间应大于短按读值的最短时间要求（0.3秒）